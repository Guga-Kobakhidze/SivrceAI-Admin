import{k as w,f as a,e as m,y as i,I as y,a as T,d as b,h as x,j as l,L as R,i as Q}from"./index-DxfvgruV.js";import{u as $,Q as c}from"./queryKeys-B_vzKx7n.js";import{u as I}from"./yup-C8f-mJP9.js";import{I as F}from"./InteriorQuestionForm-CXHIGsqv.js";import"./index.esm-hcllBIN3.js";import"./TextFieldElement-DkVV6CSv.js";import"./Delete-Bfy5QemR.js";import"./Actions-DUD2rIXS.js";import"./useInteriorQuestions-CnG3xYxV.js";const L=async t=>(await a.get(`${c.getInteriorQuestionById}${t}/`)).data,N=t=>{const{data:e,error:s,isPending:n,refetch:o}=$({queryKey:[w,{id:t}],queryFn:()=>L(t),enabled:!!t});return{question:e==null?void 0:e[0],error:s,loading:n,refetch:o}},O=async({id:t,data:e})=>{try{return(await a.put(`${c.addEditInteriorQuestion}${t}`,e)).data}catch(s){throw console.error(s),new Error("Failed to Edit question")}};function j(){const t=m(),{mutate:e,isPending:s,error:n}=I({mutationFn:O,onSuccess:()=>{i.success("Question Edited Successfully"),t.invalidateQueries({queryKey:[y]})}});return{editQuestion:e,isEditing:s,editError:n}}const v=async({id:t})=>{try{return(await a.delete(`${c.deleteInteriorQuestion}${t}/`)).data}catch(e){throw new Error((e==null?void 0:e.message)||"Failed to delete question")}};function C(){const t=m(),{mutate:e,isPending:s,error:n}=I({mutationFn:v,onSuccess:()=>{i.success("Question Deleted Successfully"),t.invalidateQueries({queryKey:[y]})}});return{deleteQuestion:e,isDeleting:s,deleteError:n}}const G=()=>{const t=T(),{questionId:e}=b(),{showConfirmDialog:s}=x(),{editQuestion:n,editError:o,isEditing:d}=j(),{deleteQuestion:g,isDeleting:p,deleteError:r}=C(),{question:E,error:u,loading:f,refetch:q}=N(e),S=h=>{n({data:h,id:e},{onSuccess:()=>{t(Q.interiorQuestionTable),q()},onError:()=>i.error(o==null?void 0:o.message)})},D=()=>{s({buttonType:"error",cancelLabel:"Cancel",title:"Delete Question",confirmLabel:"Delete question",description:"Are you sure you want to delete this question?",onSuccess:async()=>{g({id:e},{onError:()=>i.error(r==null?void 0:r.message)}),t(Q.interiorQuestionTable)}})};return f?l.jsx(R,{}):l.jsx(F,{isEdit:!0,onSubmit:S,prefill:E,onDelete:D,error:u==null?void 0:u.message,isLoading:p||d})};export{G as default};
